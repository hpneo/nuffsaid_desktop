var Resource = {};
var API_KEY = '42f916cdc6ab0316b376f4a46731bcabf7463fb9';
var XHR = require('./xhr');

Resource.find = function(options) {
  return XHR.get('http://www.comicvine.com/api/' + options.resourceName + '/' + options.resourceCode + '-' + options.id, {
    api_key: API_KEY,
    format: 'json'
  }).then(function(data){
    return data.results;
  });
};

Resource.filter = function(options) {
  var filter = Object.keys(options.where).map(function(key) {
    return key + ':' + options.where[key];
  }).join(',');

  return XHR.get('http://www.comicvine.com/api/' + options.resourceName, {
    api_key: API_KEY,
    filter: filter,
    format: 'json'
  }).then(function(data){
    return data.results;
  });
};

module.exports = Resource;